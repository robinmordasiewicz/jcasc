        tool:
          git:
            installations:
            - home: "/usr/bin/git"
              name: "git"
        jobs:
          - script: >
              pipelineJob('ubuntu') {
                description('A ubuntu container with some utilities for running inside kubernetes')
                displayName('ubuntu container')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/ubuntu')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/ubuntu.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
          - script: >
              pipelineJob('sphinx-theme') {
                description('css and templates are used to render html with a sylized layout')
                displayName('html theme')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/sphinx-theme')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/sphinx-theme.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
          - script: >
              pipelineJob('make-html') {
                description('When the theme or source docs repos are changed this make-html pipeline is triggered.')
                displayName('make html')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/make-html')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/make-html.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
          - script: >
              pipelineJob('f5-cnf-lab') {
                description('Repo for the markdown source. This github repo should have a webhook, and this should be an upstream job to trigger make-html')
                displayName('make html')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/f5-cnf-lab')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
              }
          - script: >
              pipelineJob('sphinx') {
                description('The sphinx-build html rendering engine container. This pipeline will update make-html/Jenkinsfile. This should not be an upstream trigger for make-html, and make-html should have a webhook')
                displayName('sphinx container')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/sphinx')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/sphinx.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
          - script: >
              pipelineJob('jenkins') {
                description('The jenkins container pipeline will check the currently declared version and make sure that the image exists in the repo.')
                displayName('jenkins container')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/jenkins')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/jenkins.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
          - script: >
              pipelineJob('helm-charts') {
                description('Commiting a new version to github will trigger a github workflow which will publish a new helm chart. This pipeline should run after the upstream jenkins pipeline finishes. The workflow in the Jenkinsfile should be used as an upstream for argocd')
                displayName('helm charts')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/helm-charts')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/helm-charts.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
          - script: >
              pipelineJob('argocd') {
                description('nginx and helm-charts should be upstream jobs for argocd. argcocd github repo webhook')
                displayName('Deployment')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/argocd')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/argocd.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
          - script: >
              pipelineJob('nginx') {
                displayName('nginx/html container')
                description('This nginx container has the markdown rendered as html embedded inside.')
                quietPeriod(60)
                properties {
                  githubProjectUrl('https://github.com/robinmordasiewicz/nginx')
                  pipelineTriggers {
                      triggers {
                        githubPush()
                      }
                   }
                }
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/robinmordasiewicz/nginx.git')
                        }
                        branch('main')
                        extensions {}
                      }
                    }
                  }
                }
              }
